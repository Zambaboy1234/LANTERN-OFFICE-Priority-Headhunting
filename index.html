<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ì§‘ì¤‘ í—¤ë“œí—ŒíŒ…</title>
<style>
body { font-family:sans-serif; text-align:center; padding:20px; background:#111; color:white; }
button { font-size:20px; padding:10px 20px; margin:10px; }

.infra { color:red; }
.ultra { color:violet; }
.lumen { color:silver; }

.pickupMark { font-weight:bold; }
</style>
</head>
<body>

<h2>ğŸ¯ ì§‘ì¤‘ í—¤ë“œí—ŒíŒ… (ê°€ì¤‘ì¹˜ ì‹œìŠ¤í…œ)</h2>

<button onclick="pull(1)">1íšŒ</button>
<button onclick="pull(10)">10íšŒ</button>

<div id="result"></div>

<script>

// ======================
// ìºë¦­í„° DB
// weight ê¸°ë³¸ê°’ì€ 1
// ======================

let DB = [
    {name:"ë£¨ì‹œì•ˆ", rarity:3, weight:1},
    {name:"ë°œë Œí‹°ì•„", rarity:3, weight:1},
    {name:"ì¹´ì‹œì•„", rarity:3, weight:1},
    {name:"ìš”ë¥´ë¬¸ê°„ë“œ", rarity:3, weight:1},

    {name:"ë€", rarity:2, weight:1},
    {name:"ë‚˜ëª¨", rarity:2, weight:1},
    {name:"ì˜¬ë¦¬ë²„", rarity:2, weight:1},
    {name:"ë°±ì—°", rarity:2, weight:1},
    {name:"ëª¨ì§€", rarity:2, weight:1},
    {name:"ì•„ì´ë¦¬ìŠ¤", rarity:2, weight:1},

    {name:"ì‹ ì…ìš”ì›A", rarity:1, weight:1},
    {name:"ê²½ë¹„ë³‘", rarity:1, weight:1},
    {name:"ì—°êµ¬ì›", rarity:1, weight:1},
    {name:"ë³´ê¸‰ë³‘", rarity:1, weight:1},
    {name:"ì •ì°°ë³‘", rarity:1, weight:1},
    {name:"ìˆ˜ìŠµì¥êµ", rarity:1, weight:1}
];

// ======================
// í˜„ì¬ í”½ì—… ì§€ì •
// ======================

let PICKUP_3 = "ë°œë Œí‹°ì•„";
let PICKUP_2 = "ì•„ì´ë¦¬ìŠ¤";

// í”½ì—… ê°€ì¤‘ì¹˜ ì„¤ì •
function applyPickupWeights(){
    DB.forEach(c => {
        c.weight = 1; // ì´ˆê¸°í™”

        if(c.name === PICKUP_3){
            c.weight = 5; // 3ì„± í”½ì—… ê°€ì¤‘ì¹˜ ì¦ê°€
        }
        if(c.name === PICKUP_2){
            c.weight = 4; // 2ì„± í”½ì—… ê°€ì¤‘ì¹˜ ì¦ê°€
        }
    });
}

applyPickupWeights();

// ======================
// í¬ê·€ë„ í™•ë¥ 
// ======================

function rollRarity(){
    let r = Math.random();
    if(r < 0.03) return 3;
    if(r < 0.23) return 2;
    return 1;
}

// ======================
// ê°€ì¤‘ì¹˜ ëœë¤ ì„ íƒ
// ======================

function weightedRandom(pool){

    let totalWeight = pool.reduce((sum,c)=>sum+c.weight,0);
    let r = Math.random() * totalWeight;

    for(let c of pool){
        if(r < c.weight) return c;
        r -= c.weight;
    }
}

// ======================
// ìƒ‰ìƒ í´ë˜ìŠ¤
// ======================

function getClass(rarity){
    if(rarity === 3) return "lumen";
    if(rarity === 2) return "ultra";
    return "infra";
}

// ======================
// ë½‘ê¸°
// ======================

function pull(times){

    let output = "";

    for(let i=0;i<times;i++){

        let rarity = rollRarity();
        let pool = DB.filter(c => c.rarity === rarity);
        let char = weightedRandom(pool);

        let isPickup = (char.name === PICKUP_3 || char.name === PICKUP_2);

        output += `<div class="${getClass(char.rarity)} ${isPickup ? 'pickupMark':''}">
        â˜…${char.rarity} ${char.name} ${isPickup ? '[PICK UP]' : ''}
        </div>`;
    }

    document.getElementById("result").innerHTML = output;
}

</script>

</body>
</html>
